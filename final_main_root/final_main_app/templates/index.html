{% extends "./base.html" %} {% block content %} {% if user.is_authenticated %}
<br />
<div class="card" style="width: 18rem">
  <!-- <img class="card-img-top" src="..." alt="Card image cap" /> -->
  <div class="card-body">
    <h5 class="card-title">{{appuser.user.username}}</h5>
    <!-- <p class="card-text">
      Some quick example text to build on the card title and make up the bulk of
      the card's content.
    </p> -->
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">{{appuser.user.first_name}}</li>
    <li class="list-group-item">{{appuser.user.last_name}}</li>
    <li class="list-group-item">{{appuser.organisation}}</li>
    <li class="list-group-item">{{appuser.user.date_joined}}</li>
  </ul>
  <div class="card-body">
    <div class="alert alert-primary" role="alert">
      <h4 class="alert-heading">Status</h4>
      <hr />
      <p class="mb-0">{{appuser.status}}</p>
    </div>
  </div>
</div>
<br />

<div id="images"></div>

<script>
  setInterval(function () {
    const req = new XMLHttpRequest();
    req.onreadystatechange = function () {
      if (req.readyState === 4) {
        html = "";
        // html = '<div class="image-grid container">';
        html = "<h3>Your images</h3>";

        data = JSON.parse(req.response);
        console.log(data.length);

        if (data.length > 0) {
          data.forEach(function (obj) {
            html +=
              '<div><img src="' + obj.thumbnail + '" class="item"> </div>';
          });
        } else {
          html +=
            "<div><p>You have no images yet. To add images go to <a href='/media'>Media</a>.</p></div>";
        }

        // html += "</div>";
        document.getElementById("images").innerHTML = html;
      }
    };
    req.open("GET", "/api/images/");
    req.send();
  }, 5000);
</script>

{% else %}
<p>
  You are not logged in, please register or log in. {% endif %} {% endblock %}
</p>
